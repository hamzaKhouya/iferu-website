(function(a){var c;a("#facebookLoginButton").on("click",function(b){b.preventDefault();b=a("#facebookLoginButton").attr("href");a("#keepLoggedWithFacebook").is(":checked")&&(b+="?state\x3dkeeploggedintoiferu");window.open(b,"","width\x3d1140, height\x3d740, top\x3d"+(screen.height/2-370)+", left\x3d"+(screen.width/2-570)+",scrollbars\x3dyes")});a("#errorOkButton").on("click",function(){window.close()});a("#facebookAbortAuthentication").on("click",function(){window.close()});a("#facebookReauthenticate").on("click",
function(){a.ajax({type:"GET",url:"/social/facebook/auth_url",data:{reauthenticate:!0},statusCode:{200:function(a){a=JSON.parse(a);window.location.replace(a.auth_url)},500:function(){a("#error-dialog").show();a("#loading-dialog-redirect").hide()}}})});a(document).ready(function(){a("#loading-dialog").length?a.ajax({type:"GET",url:"/social/facebook/auth_url",statusCode:{200:function(a){a=JSON.parse(a);window.location.replace(a.auth_url)},500:function(){a("#error-dialog").show();a("#loading-dialog").hide()}}}):
a("#loading-dialog-redirect").length&&(c=a.QueryString.code,a.QueryString.denied_scopes?(a("#loading-dialog-redirect").hide(),a("#rightsNotGranted-dialog").show()):c?a.ajax({type:"POST",url:"/social/facebook/login",data:{code:c},statusCode:{200:function(a){console.log(a);void 0!=a.data.access_token?(a=a.data,window.location.replace("https://www.iferu.com/social/facebook/complete/mobile/mobileapp:facebook_login?access_token\x3d"+a.access_token+"\x26refresh_token\x3d"+a.refresh_token+"\x26customer_id\x3d"+
a.customer_id)):(window.opener.document.location.href=a.data.url,window.close())},500:function(){a("#loading-dialog-redirect").hide();a("#error-dialog").show();a("#back-button").show()}}}):(a("#loading-dialog-redirect").hide(),a("#error-dialog").show(),a("#back-button").show()))})})(jQuery);