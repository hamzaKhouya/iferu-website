(function(a,g,b,c){function f(e,b){this.element=e;this.options=a.extend({},a.gaChannelFilter.defaults,b);this._defaults=a.gaChannelFilter.defaults;this.init()}function d(a){this.element=a;this.init()}a.gaChannelPager={defaults:{spinner:'\x3cimg src\x3d"/www/images/pleasewait.gif" alt\x3d"Loading..."\x3e',nextFormSelector:"form.chnl-next"}};a.fn.gaChannelPager=function(){var e=a.gaChannelPager.defaults;return this.each(function(){var d=a(this),c=a("a, button[type\x3dsubmit], input[type\x3dsubmit]",
d),f=d.find("input[name\x3dpage]").val();d.ajaxForm({replaceTarget:!0,target:d,beforeSubmit:function(){c.html(e.spinner)},error:function(a){c.html(":(")},success:function(){a(e.nextFormSelector).gaChannelPager();a(".chnl-items:not(.initialized)").gaInitGeneral().addClass("initialized");var d=g.location.href;-1==d.indexOf("page\x3d")&&(d=d+(-1!=d.indexOf("?")?"\x26":"?")+"page\x3d0");history.pushState(null,a(b).find("title").text(),d.replace(/page=\d*/g,"page\x3d"+f));a(g).trigger("statechange")}})})};
a.gaChannelFilter={defaults:{spinner:'\x3cimg src\x3d"/www/images/pleasewait.gif" alt\x3d"Loading..."\x3e',sortLinkSelector:".chnl-sort a",targetSelector:".chnl-item-container"}};f.prototype={init:function(){a(this.options.sortLinkSelector).on("click",a.proxy(this.doSort,this));a(this.element).on("submit",a.proxy(this.doFilter,this)).find("input, select").on("change",function(){a(this.form).trigger("submit")});-1==g.location.href.indexOf("\x26page\x3d")&&history.replaceState(this._getUri(!0),a(b).find("title").text(),
g.location.href);a(g).on("statechange popstate",a.proxy(this.onStateChange,this))},doSort:function(e){e.preventDefault();a(this.element).find("input[name\x3dsorting]").val(a(e.target).data("gaSorting")).trigger("submit")},doFilter:function(e){e.preventDefault();history.pushState(this._getUri(!1),a(b).find("title").text(),this._getUri(!1));a(g).trigger("statechange")},onStateChange:function(){this._populateForm(g.location.pathname,a.deparam(history.state));if(!a.deparam(g.location.search.slice(1)).page){var e=
this;a(this.element).ajaxSubmit({target:this.options.targetSelector,success:function(){a(a.gaChannelPager.defaults.nextFormSelector).gaChannelPager();a(".chnl-items:not(.initialized)").gaInitGeneral().addClass("initialized");a(e.options.sortLinkSelector).removeClass("active disabled").filter("[data-ga-sorting\x3d"+a(e.element).find("input[name\x3dsorting]").val()+"]").addClass("active disabled")},error:function(){a(e.options.targetSelector).html('\x3cdiv class\x3d"col-sm-12" style\x3d"font-size:5em;"\x3e:(\x3c/div\x3e')}})}},
_getUri:function(e){var d=a(this.element).attr("action"),b=d+(0<=d.indexOf("?")?"\x26":"?")+a(this.element).find("input:not([name^\x3d_]), select:not([name^\x3d_]) ").fieldSerialize();if(e){var c=a(this.element).find("input:not([name^\x3d_]), select:not([name^\x3d_])").serializeArray().map(function(a){return a.name});c.concat(d.split("?")[1]?d.split("?")[1].split("\x26").map(function(a){return a.split("\x3d").shift()}):[]);e=g.location.search.substr(1).split("\x26").filter(function(a){return-1==c.indexOf(a.split("\x3d").shift())}).join("\x26");
0<e.length&&(b+="\x26"+e)}return b},_populateForm:function(e,d){var b=this;a("input[type\x3d'checkbox'], input[type\x3d'radio']",a(this.element)).each(function(){var e=a(this),b=e.val(),c=d[e.attr("name")],b=a.isArray(c)?-1<a.inArray(b,c):c==b;e.prop("checked",b)});a.each(d,function(e,d){a("[name\x3d'"+e+"']:not([type\x3d'checkbox']):not([type\x3d'radio'])",a(b.element)).val(d);a("select[name\x3d'"+e+"']").trigger("change.select2")});a(this.element).attr("action",e)}};a.fn.gaChannelFilter=function(e){return this.each(function(){a.data(this,
"plugin_gaChannelFilter")||a.data(this,"plugin_gaChannelFilter",new f(this,e))})};d.prototype={init:function(){var e=this,d=a('\x3cbutton class\x3d"btn btn-default"\x3e\x3ci class\x3d"ico-trash-empty"\x3e\x3c/i\x3e \x3cspan class\x3d"visible-lg-inline"\x3e'+a("h1",this.element).data("gaCustchannelDeleteLabel")+"\x3c/span\x3e\x3c/button\x3e").on("click",a.proxy(this.del,this)),b=a('\x3cbutton class\x3d"btn btn-default"\x3e\x3ci class\x3d"ico-pencil"\x3e\x3c/i\x3e \x3cspan class\x3d"visible-lg-inline"\x3e'+
a("h1",this.element).data("gaCustchannelEditLabel")+"\x3c/span\x3e\x3c/button\x3e").on("click",a.proxy(this.editTitle,this)),d=a('\x3cdiv class\x3d"btn-group chnl-edit-btns" role\x3d"group"\x3e\x3c/div\x3e').append(b).append(d),b=a('\x3cbutton class\x3d"btn btn-default"\x3e\x3ci class\x3d"ico-ok"\x3e\x3c/i\x3e\x3c/button\x3e').on("click",a.proxy(this.saveTitle,this)),c=a('\x3cinput class\x3d"form-control"\x3e').on("keyup",function(b){a(this).val()&&13==b.which&&e.saveTitle()}),b=a('\x3cdiv class\x3d"input-group input-group-lg title-form"\x3e\x3c/div\x3e').hide().append(c).append(a('\x3cspan class\x3d"input-group-btn"\x3e\x3c/span\x3e').append(b));
a("h1",this.element).first().wrapInner('\x3cspan class\x3d"title-text"\x3e\x3c/span\x3e').append(d).wrapInner('\x3cspan class\x3d"title-view"\x3e\x3c/span\x3e').append(b);this.$modal=a(a("h1",this.element).data("gaCustchannelDeleteModal")).modal({show:!1});a(this.element).on("click",".gsg-delete",this.removeItem)},del:function(){this.$modal.length&&this.$modal.modal("show")},editTitle:function(){a(".title-view, .title-form",this.element).toggle();a(".title-form input",this.element).val(a(".title-text:first",
this.element).first().text().trim()).trigger("focus")},saveTitle:function(){var b={title:a(".title-form input",this.element).val()};a(".title-text",this.element).text(b.title);a(".title-view, .title-form",this.element).toggle();a.ajax({url:a("h1",this.element).data("gaCustchannelUrl"),type:"PUT",data:b,dataType:"html"}).fail(this.onSaveTitleFail)},onFail:function(a,b){noty({text:"Error",timeout:1E3,animation:notifyAnimation,theme:"relax",layout:"center",type:"error"})},removeItem:function(b){b={dataId:-a(this).data("gaDataid")};
var d=a(this);a.ajax({url:a("h1",this.element).data("gaCustchannelUrl"),type:"PUT",data:b,dataType:"html"}).done(function(){d.closest(".ga-summary-grid").parent("[class|\x3dcol]").remove()}).fail(this.onFail)}};a.fn.gaCustChannelEditor=function(){return this.each(function(){a.data(this,"plugin_gaCustChannelEditor")||a.data(this,"plugin_gaCustChannelEditor",new d(this))})}})(jQuery,window,document);
$(function(){$(".chnl-filter form").gaChannelFilter();$($.gaChannelPager.defaults.nextFormSelector).gaChannelPager();$(".custchannel").gaCustChannelEditor();$(".chnl-filter .btn-group").on({click:function(a){this.prevLabelClick||(this.closable=$(a.target).is(".dropdown-toggle")||0<$(a.target).parents(".dropdown-toggle").length);this.prevLabelClick=$(a.target).is("label")},"hide.bs.dropdown":function(a){a=this.closable;this.closable=!0;return a}})});
$(function(){$(".jiveButton, .yammerButton, .slackButton").on("click",function(a){a.preventDefault();null!=window.open(this.href,"","width\x3d650,height\x3d600,scrollbars\x3dyes")&&setTimeout("auth_window.focus()",100)});$(".chatterButton").on("click",function(a){var g=$(this),b=g.data("gaChatterIntegrationType")||"oauth2";a.preventDefault();"oauth2"===b?null!=window.open(this.href,"","width\x3d650,height\x3d600,scrollbars\x3dyes")&&setTimeout("auth_window.focus()",100):"saml"==b&&(a=function(){$("\x3cdiv\x3e\x3c/div\x3e").html('\x3ciframe style\x3d"border: 0px;" src\x3d"'+
g.attr("href")+'" width\x3d"100%" height\x3d"100%"\x3e\x3c/iframe\x3e').dialog({autoOpen:!0,modal:!0,height:625,width:650,title:"Chatter"})},$.ajax({type:"POST",url:"/social/chatter/auth",statusCode:{202:a,500:a}}))});$(".sharepointButton").on("click",function(a){var g=$(this).data("gaSharepointIntegrationType");a.preventDefault();"oauth2"==g&&null!=window.open(this.href,"","width\x3d650,height\x3d600,scrollbars\x3dyes")&&setTimeout("auth_window.focus()",100)})});
(function(a){function g(b){b=a(b);var c=b.data(),f=c.plugin,d={};if(f){if(!a.fn.hasOwnProperty(f))throw"jQuery Plugin "+f+" not found.";for(var e in c){var g="";0===e.toLowerCase().indexOf(f.toLowerCase())&&(g=e.slice(f.length).replace(/^\w/,function(a){return a.toLowerCase()}),d[g]="string"===a.type(c[e])?JSON.parse(c[e]):c[e])}a.fn[f].call(b,d)}}Dropzone.autoDiscover=!1;a(function(){a("input:not([type]),input[type\x3dtext],input[type\x3dsearch],input[type\x3durl],input[type\x3dtel],input[type\x3demail],input[type\x3dpassword],textarea").gaPlaceholder()});
a(function(){var b=a("[data-ga-session-keepalive-options]").data("gaSessionKeepaliveOptions");a.gaSessionKeepalive(b)});a(function(){a.fn.datepicker&&a.fn.datepicker.noConflict&&a("input.gaCal").length&&a.fn.datepicker.noConflict();a.datepicker.setDefaults(a.datepicker.regional[a("html").attr("lang")]||a.datepicker.regional[""]);a("input.gaCal").gaCal()});a(function(){a("[data-ga-localtime-utc]").gaLocaltime()});a(function(){a("[data-ga-gtm-event]").gaGTMEvent()});a(function(){a("#mobHeader").gaMobileHeader()});
a(function(){a(".portlet").gaPortletUri()});a(function(){a("form").gaAddressform()});a(function(){a("[data-ga-search]").gaTopSearch()});a(function(){a.fn.tooltipster("setDefaults",{position:"right",interactive:!0,delay:50,speed:100,maxWidth:400,animation:"grow"})});a(function(){a("#langDropRel, #accDropRel").on("mouseenter",function(){a(this).addClass(this.id+"Hovered")}).on("mouseleave",function(){a(this).removeClass(this.id+"Hovered")}).on("click",function(){a(this).toggleClass(this.id+"Hovered")})});
a(function(){a(".swiper").each(function(b,c){var f=a(c),d=a(f.data("nextButton")),e=a(f.data("prevButton")),g=a(f.data("pagination")),k=a(f.data("linkedSwipers"));f.addClass("swiper-container").children(":not(.swiper-scrollbar)").not(d.add(e).add(g)).addClass("swiper-slide").removeClass("hidden").wrapAll('\x3cdiv class\x3d"swiper-wrapper"\x3e\x3c/div\x3e');var h=f.swiper(a.extend({loop:!0,autoplay:1E4,calculateHeight:!0},f.data()));if(d.length||e.length)d.on("click",function(){h.swipeNext()}),e.on("click",
function(){h.swipePrev()}),h.addCallback("SlideChangeStart",function(){d.css("visibility",!h.params.loop&&h.activeIndex>=h.slides.length-1?"hidden":"visible");e.css("visibility",!h.params.loop&&0>=h.activeIndex?"hidden":"visible")}),h.fireCallback("SlideChangeStart",h);k.length&&h.addCallback("SlideChangeStart",function(b,d){k.each(function(){var d=a(this).data("swiper");d&&d.swipeTo(b.activeIndex,b.params.speed,!1)})})})});a(function(){var b=a("#nav-menu-search"),c=a("#topSearchBoxInput");a("#nav-search-btn").on("click",
function(a){c.val()||(a.preventDefault(),c.trigger("focus"))});b.on("focusin",function(a){c.is(":focus")||b.is(".in")||a.target==c[0]||c.trigger("focus");b.addClass("in")});document.querySelector("body").addEventListener("keyup",function(b){b=b||event;9==b.keyCode&&(b=a("#nav-menu-search"),a.contains(b[0],document.activeElement)||b.removeClass("in"))});document.querySelector("body").addEventListener("mouseup",function(b){b=a("#nav-menu-search");a.contains(b[0],document.activeElement)||b.removeClass("in")});
var f=a(".ga-search-top");0<f.length&&f.typeahead({group:{key:"contentItemType",template:function(b){return a(".ga-search-top").data("gaGroupnames")[b.contentItemType]}},minLength:1,maxItem:10,maxItemPerGroup:5,dynamic:!0,filter:!1,searchOnFocus:!0,highlight:!1,href:"{{url}}",template:function(a,b){return'\x3cspan class\x3d"'+(b.activationTime?"":"gsg-inactive")+'"\x3e\x3cspan class\x3d"search-bookcover"\x3e\x3cimg src\x3d"'+b.thumbnail+'" class\x3d"search-bookcover-resize"\x3e\x3c/span\x3e\x3cspan class\x3d"search-biblio"\x3e\x3cspan class\x3d"search-mainTitle"\x3e'+
b.title+'\x3c/span\x3e\x3cspan class\x3d"search-authors"\x3e'+(b.authorInfo?b.authorInfo:"")+"\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e"},source:{channels:{ajax:{url:"/search/channels",data:{query:"{{query}}"}}},summaries:{ajax:{url:"/search/summaries",data:{query:"{{query}}"}}},lgxps:{ajax:{url:"/search/lgxps",data:{query:"{{query}}"}}}},callback:{onNavigateBefore:function(a,b,c){~[38,40].indexOf(c.keyCode)&&(c.preventInputChange=!0)},onClickBefore:function(b,e,c,f){[13].indexOf(f.keyCode)&&(f.preventDefault(),
a(location).attr("href",c.url))},onHideLayout:function(b,c){var f=a("#nav-menu-search");a.contains(f[0],document.activeElement)||f.removeClass("in")}}});a("#topSearchForm .typeahead__container").on("focusin",function(){a("#headerRight").css("display","none");a("#headerSearch").removeClass("grid-6");a("#headerSearch").addClass("grid-11")});a("#topSearchForm .typeahead__container").on("focusout",function(b){a(b.currentTarget).is(".typeahead__container, .cancel, .result")&&(a("#headerRight").css("display",
"block"),a("#headerSearch").removeClass("grid-11"),a("#headerSearch").addClass("grid-6"))});a("#topSearchFormB2B .typeahead__container").on("focusin",function(){a("#headerRight").css("display","none");a("#headerSearch").removeClass("grid-3");a("#headerSearch").addClass("grid-8")});a("#topSearchFormB2B .typeahead__container").on("focusout",function(b){a(b.currentTarget).is(".typeahead__container, .cancel, .result")&&(a("#headerRight").css("display","block"),a("#headerSearch").removeClass("grid-8"),
a("#headerSearch").addClass("grid-3"))})});a(function(){a.fn.slick&&a(".slick-container").slick()});a(function(){a(".promobox-slider").gaPromoboxSlider()});a(function(){a("[data-ga-dialoglink]").gaDialoglink()});a(function(){a("[data-ga-tiplink]").gaTiplink()});a(function(){a("[data-ga-analytics]").gaAnalytics()});a(function(){a("[data-ga-audioplayer-url]").gaAudioplayer()});a(function(){a(".ga-move-link").gaMoveLink()});a(function(){a(".ga-auto-submit").gaInputChangeSubmitter()});a(function(){a("[data-ga-formtoggler-name]").gaFormtoggler()});
a(function(){a("[data-ga-toggler-name]").gaToggler()});a(function(){a("[data-ga-selector-src]").gaSelector()});a(function(){a(".ga-passwordstrength").gaPasswordstrength()});a(function(){a("[ data-ga-automodal]").gaAutomodal()});a(function(){a("[data-ga-clipboardbutton-target]").gaClipboardbutton()});a(function(){a("[data-ga-summary-options-link]").gaSummaryOptions()});a(function(){a("form[data-ga-validator]").on("submit",function(b){return a(this).gaValidator().gaValidator("validate")})});a(function(){a.fn.bootstrapSwitch&&
a("[data-switch]").bootstrapSwitch()});a(function(){a("form[data-ga-form-to-toast]").gaFormToToast()});a.gaNotificationInit=function(b,c){a.ajax(b,{cache:!1,dataType:"json",success:function(b){a.gaNotification(b||{})},error:function(a,b,c){console&&console.error(c)}})};"function"===typeof a.fn.button.noConflict&&(a.fn.bootstrapBtn=a.fn.button.noConflict(),a(".btn-group").find('[checked\x3d"checked"]').parent().addClass("active"),a.fn.select2&&a(".selectpicker").select2({theme:"bootstrap"}));a(function(){a.fn.popover&&
a('[data-toggle\x3d"popover"]').popover()});a(function(){a("[data-shave]").each(function(){var b=a(this),c="auto"!=b.css("max-height")?parseFloat(b.css("max-height")):null,f=b.html();b.shave(b.data("shave")||c||1.4*parseFloat(b.css("font-size")));a(this).click(".js-shave-char",function(){b.html(f).addClass("js-shave-expanded")})})});a(function(){a(".chnl-follower").gaChannelFollower()});a(function(){a("[data-chnl-insight-list]").gaChnlInsightList()});a(function(){a("[data-ga-bookmarker]").gaBookmarker();
a(document).on("ga:bookmark",function(){a(".portlet[data-portlet-type\x3dREADINGLIST]").gaPortletUri()})});a(function(){a("[data-ga-greeter]").gaGreeter()});a(function(){a("[data-plugin]").each(function(a,c){g(c)})});a.fn.gaInitGeneral=function(){return this.each(function(){$this=a(this);a("input:not([type]),input[type\x3dtext],input[type\x3dsearch],input[type\x3durl],input[type\x3dtel],input[type\x3demail],input[type\x3dpassword],textarea",$this).gaPlaceholder();a("input.gaCal",$this).gaCal();a("[data-ga-localtime-utc]",
$this).gaLocaltime();a("[data-ga-gtm-event]",$this).gaGTMEvent();a("[data-ga-dialoglink]",$this).gaDialoglink();a("[data-ga-automodal]",$this).gaAutomodal();a("[data-ga-tiplink]",$this).gaTiplink();a("[data-ga-audioplayer-url]",$this).gaAudioplayer();a("[data-ga-formtoggler-name]",$this).gaFormtoggler();a("[data-ga-toggler-name]",$this).gaToggler();a(".ga-move-link",$this).gaMoveLink();a(".ga-auto-submit",$this).gaInputChangeSubmitter();a(".ga-passwordstrength").gaPasswordstrength();a("[data-ga-selector-src]",
$this).gaSelector();a("[data-ga-summary-options-link]",$this).gaSummaryOptions();a(".chnl-follower",$this).gaChannelFollower();a("[data-ga-bookmarker]",$this).gaBookmarker();a("[data-ga-greeter]",$this).gaGreeter();a.fn.bootstrapSwitch&&a("[data-switch]",$this).bootstrapSwitch();$this.gaGTMVirtualpageview();a("form",$this).gaAddressform();a(".swiper",$this).each(function(b,c){var f=a(c);f.addClass("swiper-container").children().addClass("swiper-slide").removeClass("hidden").end().wrapInner('\x3cdiv class\x3d"swiper-wrapper"\x3e\x3c/div\x3e');
f.swiper(a.extend({loop:!0,autoplay:1E4,calculateHeight:!0},f.data()))});a(".slick-container",$this).each(function(b,c){a(c).slick()});a("[data-shave]",$this).each(function(){var b="auto"!=a(this).css("max-height")?parseFloat(a(this).css("max-height")):null;a(this).shave(a(this).data("shave")||b||1.4*parseFloat(a(this).css("font-size")))});a("form[data-ga-form-to-toast]",$this).gaFormToToast();a("[data-plugin]",$this).each(function(a,c){g(c)});"undefined"!==typeof Hyphenator&&Hyphenator.run&&Hyphenator.run();
a("form[data-ga-validator]").on("submit",function(b){return a(this).gaValidator().gaValidator("validate")})})};a(".vzaar-video").on("click",function(b){b.preventDefault();b=a(this).attr("data-vzaarid");a(this).gaVideoDialog({videoId:b,height:720,width:1280,onClose:null,autoplay:!0})});a(window).on("load",function(){a("div.hiwVideos.dsgSection").removeAttr("style")})})(jQuery);
(function(a){var g=!1,b=!1;navigator.userAgent.match(/msie|trident/i)&&a(".socTeams").hide();var c=function(){var b=0,c=a(".abstractText").height(),e=1;do a("#sidequotes").css("fontSize",e+"em"),b=a("#sidequotes").height("auto").height(),e-=0.05;while(b>c);a("#sidequotes").height(c)},f=function(b){var c=a('\x3cdiv class\x3d"text-center"\x3e\x3cimg src\x3d"/www/images/pleasewait.gif" alt\x3d"Loading..."\x3e\x3c/div\x3e'),e={open:{opacity:"toggle",height:"toggle"},close:{opacity:"toggle",height:"toggle"},
easing:"easeOutCubic",speed:300},d={},d=767<a(window).width()?{offsetX:-10,position:"right"}:{position:"bottom-left",maxWidth:0.8*a(window).width(),maxHeight:0.4*a(window).height(),offsetX:-150,overflowY:"scroll"};a(".ix-button.custchannelLink",b).tooltipster(a.extend({},d,{trigger:"click",arrow:!1,content:c,contentAsHTML:!0,updateAnimation:!1,functionReady:function(a){a.removeAttr("title")},functionAfter:function(a){var b=a.data("gaTiplinkTitle");"string"===typeof b&&a.attr("title",b)},functionBefore:function(b,
d){var f=function(b){b.preventDefault();b=a(this).closest(".new-channel").length;var c={dataId:a(this).data("gaDataid")};b&&a.extend(c,{newTitle:a("input[type\x3dtext]",a(this).closest(".new-channel")[0]).val()});a.ajax({type:b?"POST":"PUT",url:a(this).data("gaCustchannelUrl"),data:c,dataType:"html"}).done(g).fail(u)},g=function(a,c){b.tooltipster("hide");noty({text:b.data("gaCustchannelAddMsg"),timeout:3E3,animation:e,theme:"relax",layout:"center",type:"success"})},u=function(a,b){noty({text:a.responseText,
timeout:1E3,animation:e,theme:"relax",layout:"center",type:"error"})};b.tooltipster("content",c);a.ajax({type:"GET",url:b.data("gaCustchannelUrl"),dataType:"html"}).done(function(c,e,w){b.tooltipster("content",c);d();var g=b.tooltipster("elementTooltip");a("ul li a, ul li button",g).one("click",f);a(".new-channel input[type\x3dtext]").trigger("select");a(".new-channel input[type\x3dtext]",g).on("keyup",function(b){a(this).val()&&13==b.which&&a(a(this).closest("li").find("button"),g).trigger("click")})})}}));
a(".ix-button.custchannelLink").each(function(){var b=a(this).data("gaTiplinkTitle");"string"===typeof b&&a(this).attr("title",b)})},d=function(b){function c(b,d,f){a.ajax({type:f?"DELETE":"POST",url:b,data:{status:d},error:function(a,b,c){g=!1;alert(c)},success:function(b,c,d){g=!1;var f=a(e);a(document).data("gaReadingStatus",c);a(f).each(function(){var c=a(this),d=a(this).data("selector");if(d&&d.length&&c.next(".ix-selector").length){var g=d.tooltipster("hide").tooltipster("content"),v=g.find(e),
t=g.find("[data-ga-readingstatus-status\x3d'"+b.status+"']");f=f.add(v);t.length&&(d.before(t),g.prepend(c))}});f.each(function(){a(this).toggleClass("active",b.status===a(this).data("gaReadingstatusStatus"))})}})}var e=".ix-button.readingstatus";a(e,b).on("click",function(b){g||(g=!0,b.preventDefault(),a(document).trigger("gaReadingStatus",a(this).data("gaReadingstatusStatus")))});var d=a(e+".active");d.length&&a(document).data("gaReadingStatus",d.data("gaReadingstatusStatus"));a(document).on("gaReadingStatus",
function(b,d){var f=null,g="[data-ga-readingstatus-status\x3d'"+d+"']";a(e).each(function(){var b=a(this);if(b.is(g))return f=b,!1;if(b=b.data("selector"))if(f=b.tooltipster("content").find(g).first(),f.length)return!1});f&&f.length&&c(f.data("gaReadingstatusUrl"),f.data("gaReadingstatusStatus"),f.hasClass("active"))});a(e+":first-child",b).each(function(){var b=a(this.parentNode),c=a(this),b=b.children(e),d=b.filter(":not(:first)").removeClass("hidden");if(1<b.length){var f=a("\x3ca class\x3d'ix-button ix-selector'\x3e\x3cspan class\x3d'ir ico10 icoThreeDots10'\x3e\x3c/span\x3e\x3c/a\x3e").insertAfter(c),
g=c.data("gaReadingstatusMorelink"),c=g?a("\x3cdiv class\x3d'ix-selector-link'\x3e\x3ca href\x3d'"+g+"'\x3e"+c.data("gaReadingstatusMoretext")+"\x3c/a\x3e\x3c/div\x3e"):null,g=Math.max.apply(null,b.map(function(){return a(this).width()}).get())+1;b.width(g);d=a("\x3cdiv class\x3d'ix-selector-box'\x3e").append(d).append(c);b.data("selector",f.tooltipster({trigger:"click",position:"bottom-right",offsetY:-8,offsetX:-34,arrow:!1,content:d,contentAsHTML:!0,contentCloning:!1}))}})},e=function(c){a(".ix-button.dolike, .ix-button.dodislike",
c).on("click",function(c){if(!b){b=!0;var d=a(this);c.preventDefault();a.ajax({type:d.hasClass("active")?"DELETE":"POST",url:d.data("ga-like-url"),error:function(a,c,d){b=!1;alert(d)},success:function(c,d,e){b=!1;a(".ix-button.dolike").toggleClass("active",c.like).children(".ix-label").text(c.likeCount);a(".like-count").text(c.likeCount)}})}})},m=function(){if(a(".showAbstractLead").length&&a("#miniLead").length){var b=a("#leadBg \x3e"),c=a(".showAbstractLead"),d=a("#miniLead ").appendTo(a("body").first()),
b=Math.max(b.height(),c.height()),e=c.offset().top+b,f=e-50;a(".mobMoreLink",d).on("click",function(){a(".ix-bar",d).toggleClass("noMobile")});a(window).on("scroll",function(){var b=a(document).scrollTop();if(b>e)d.css({top:"",transform:""}).fadeIn(400).children().css("opacity","");else if(b>f){var c=(b-f)/50;d.css({top:e-b,transform:"scaleY("+c+")",transformOrigin:"0 0"}).show().children().css("opacity",c)}else d.hide()})}if(a(".readingprogress").length){var g=null,h=a(document).scrollTop(),k=!1,
r=a(".readingprogress").data(),m={},l=parseFloat(r.gaReadingprogressProgress)||0,q=r.gaReadingprogressParam||"progress",s=parseInt(r.gaReadingprogressTotaltime)||12E4,n=l*s,p=a("\x3cspan style\x3d'position:fixed; bottom:0; right:0; background-color:white;'\x3e");a(".ix-button.readingstatus");a.QueryString&&a.QueryString.progresstrace&&p.appendTo(a("body"));a(window).on("scroll",function(){var b=a(document).scrollTop(),c=a(".abstract").height()-70,d=a(".abstract").offset().top,e=a(window).height();
null===g&&10<b&&(g=(new Date).getTime());c=(b-d+e/2)/c;d=(new Date).getTime()-g;p.text("Reported progress: "+(100*l).toFixed(0)+" / Page progress: "+(100*c).toFixed(0)+" / Page threshold: "+(100*(l+0.1)).toFixed(0)+"  / Time on page: "+(d/1E3).toFixed(2)+"s / Time threshold: "+((s*c-n)/1E3).toFixed(2)+"s");!1===k&&h<b&&1>l&&c>=l+0.1&&d>=s*c-n&&(k=Math.round(10*(l+0.1))/10,m[q]=k,a.ajax({type:"POST",url:r.gaReadingprogressUrl,data:m,success:function(a){l=a.readingProgress;k=!1}}));h=b;a("#miniLead .readingprogress").width(100*
c+"%")})}},k=function(){var b=a(".sumActivationForm, .sumLoggingForm").on("submit",function(b){b.preventDefault();var g=a(this);g.data("sumActivationFormPending")||(g.data("sumActivationFormPending",!0),a.ajax({type:g.attr("method"),url:g.attr("action"),data:g.serialize(),success:function(b){if(b){var h=a(".abstract").css("position","relative"),k=h.children().fadeTo(300,0,function(){a(this).css("visibility","hidden")});a("\x3cdiv\x3e\x3c/div\x3e").css({position:"absolute",zIndex:"2",height:0,opacity:0,
top:0,overflow:"hidden"}).html(b).prependTo(h).animate({height:1E3,opacity:1},300,function(){a(this).children().unwrap();k.remove();h.gaInitGeneral();c();setTimeout(c,1E3);e(h);d();m();f();q();n();var b=a("html,body");0==b.scrollTop()&&(b=a("body"));b.scrollTop(b.scrollTop()-1);b.scrollTop(b.scrollTop()+1)});a(document).data("gaReadingStatus")||a(document).trigger("gaReadingStatus","READING");g.data("sumActivationFormPending",!1);p(!0)}else g.trigger("submit")},error:function(a,b){alert("Error activating abstract. Reloading...");
location.reload();g.data("sumActivationFormPending",!1)}}))});if(b.filter(".sumActivationForm").length)a("#audioPlayer a, #audioPlayerInterface a").on("click",function(){b.filter(".sumActivationForm").trigger("submit")})},h=function(){a("[data-ga-comingsoon-notify-url]").on("click",function(b){var c=a(this);b.preventDefault();a.ajax({type:c.hasClass("active")?"DELETE":"POST",url:c.data("gaComingsoonNotifyUrl"),error:function(a,b,c){alert(c)},success:function(b,d,e){b=!c.hasClass("active");a(".notifier").effect("highlight").toggleClass("active",
b).children(".notify").toggleClass("hidden",b).end().children(".notified").toggleClass("hidden",!b)}})})},q=function(){a(".ix-button.fontsizer").gaFontsizer({selector:".abstract",steps:["0.953333em","1.0666667em","1.1em","1.231em","1.3em"],defaultIndex:1,cookieName:"summaryPageFontS",onChange:function(){c()}})},n=function(){setTimeout(function(){a(".ix-bar").affix({offset:{top:function(){return this.top=(a("#header").outerHeight(!0)||0)+a(".sump-head").outerHeight(!0)+125},bottom:function(){return this.bottom=
a(".moreToTheAbstract").outerHeight(!0)+75+(a("#footer").outerHeight(!0)||0)}}})},500)},p=function(b){var c=a(".annot-section").data("ga-annotations-customer-not-empty"),d=a(".annot-section").data("ga-annotations-allowed-feature");b&&c&&d&&(a(".annot-section__button").on("click",function(){var b=a(".annot-section__wrapper"),c=a(".annot-section__button i");b.is(":hidden")?(c.removeClass(),b.slideDown(500),c.addClass("ico-arrow-up")):(c.removeClass(),b.slideUp(500),c.addClass("ico-arrow-down"))}),a(".annot-wrapper").gaAnnotation())};
a(function(){c();f();d();e();m();k();h();a(".abstractComments.active").gaCommenter();q();n();setTimeout(c,1E3);a(window).on("resize",a.throttle(200,c));p(a(".annot-wrapper--active").length)})})(jQuery);